# Identicon

Github で新しくアカウントを造ったとき、
デフォルトでアイコンを自動生成する
(identiconと呼ぶ)


250 x 250 px
の正方形に、 50 x 50 px の正方形のカラーをランダムで配置する

# Icon のシード
文字列をもとに生成する

String -> Identicon Generator -> Image

# main pipeline

1. String
2. Compute MD5 hash
3. List of numbers
4. Pick color
5. Build grid of squares
6. Convert grid into image
7. Save image

# :crypto module

Erlang のモジュール
hash/2関数がある
`:crypt.hash(:algorithm_atom, value)`


# Base module

Baseエンコードを実装するモジュール
`hash/2`の出力がバイナリなので、String として読めるように変換できる
`BAse.encode16(hash)`


# :binary module
Erlang のモジュール
binary 型を扱う
(リストにしたり)

# hash binary の扱い

```elixir
iex> Identicon.main "asdf"
[145, 46, 200, 3, 178, 206, 73, 228, 165, 65, 6, 141, 73, 90, 181, 112]
```
8bit = 1Byte の list
16要素あるので 16byte
:hex というフィールド名をつけて扱うことにする

- 最初の3つを RGB Code に
- 残りをグリッドに


# Grid の割当
左右対称にする
1, 2, 3, 2, 1
4, 5, 6, 5, 4
7, 8, 9, 8, 7
10, 11, 12, 11, 10
13, 14, 15, 14, 13

25マスだけど、実質15bitのon/off情報があればいい
だけど、ここは hash binary の 0 ~ 14 番目までを Integer として扱い、
偶数なら着色、奇数なら無地
でアイコンを作る



# List comprehension で、要素のインデックスを得る方法

`Enum.with_index/1`
リストを入れると、`{item, i}` の形で
インデックスを付けたタプルリストにする

これを `for` で使う

# egd : Image Manipuration package

erlang graphical drawer

これは Erlang のパッケージ
ただし、Elixir でも使える

line, fillRectangle などの関数がある

## deps に egd を追加する。

最近、egd は Erlang/OTP に関係が無いことから標準ライブラリを外されたらしい。
依存に含めるには、 `{:egd, github: "erlang/egd"}` を `mix.exs` の `deps`に含める。

`github: "user/repo"` で Github からパッケージをインストールできるらしい